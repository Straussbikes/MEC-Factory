{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"responsive-page\"\n};\nconst _hoisted_2 = {\n  class: \"login-form-container\"\n};\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"h1\", {\n  class: \"login-title\"\n}, \"Login\", -1);\nconst _hoisted_4 = {\n  class: \"form-group\"\n};\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"email\"\n}, \"Email:\", -1);\nconst _hoisted_6 = {\n  class: \"form-group\"\n};\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"password\"\n}, \"Password:\", -1);\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"submit\",\n  class: \"login-button\"\n}, \"Login\", -1);\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"form\", {\n    onSubmit: _cache[2] || (_cache[2] = _withModifiers((...args) => $options.submitForm && $options.submitForm(...args), [\"prevent\"])),\n    class: \"login-form\"\n  }, [_hoisted_3, _createElementVNode(\"div\", _hoisted_4, [_hoisted_5, _withDirectives(_createElementVNode(\"input\", {\n    type: \"email\",\n    id: \"email\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.email = $event),\n    required: \"\"\n  }, null, 512), [[_vModelText, $data.email]])]), _createElementVNode(\"div\", _hoisted_6, [_hoisted_7, _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    id: \"password\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.password = $event),\n    required: \"\"\n  }, null, 512), [[_vModelText, $data.password]])]), _hoisted_8], 32)])]);\n}","map":{"version":3,"names":["class","_createElementVNode","for","type","_createElementBlock","_hoisted_1","_hoisted_2","onSubmit","_cache","_withModifiers","args","$options","submitForm","_hoisted_3","_hoisted_4","_hoisted_5","id","$data","email","$event","required","_hoisted_6","_hoisted_7","password","_hoisted_8"],"sources":["/home/bikes/Desktop/MECGIT/MEC-Factory/frontend/src/views/Login.vue"],"sourcesContent":["<template>\n  <div class=\"responsive-page\">\n   \n    \n    <div class=\"login-form-container\">\n    <form @submit.prevent=\"submitForm\" class=\"login-form\">\n      <h1 class=\"login-title\">Login</h1>\n      <div class=\"form-group\">\n        <label for=\"email\">Email:</label>\n        <input type=\"email\" id=\"email\" v-model=\"email\" required />\n      </div>\n      <div class=\"form-group\">\n        <label for=\"password\">Password:</label>\n        <input type=\"password\" id=\"password\" v-model=\"password\" required />\n      </div>\n      <button type=\"submit\" class=\"login-button\">Login</button>\n    </form>\n    </div>\n  </div>\n  \n  </template>\n  \n  <script>\n\nimport axios from 'axios';\nimport { nextTick } from 'vue';\nimport {ref} from \"vue\";\nimport { useUserStore } from '@/services/user-store';\n\n // Import your user store\nconst userStore = useUserStore();\n\n  export default {\n    data() {\n      return {\n        email: '',\n        password: '',\n      };\n    },\n    methods: {\n        async submitForm() {\n        try {\n        const response = await axios.post('/login', {\n           \"email\": this.email,\n          \"password\": this.password,\n        });\n        userStore.token=response.data.ok;\n        userStore.expiresIn=response.data.expiresIn;\n        userStore.setTime();      \n        if(response.status==200) {\n          userStore.isLoggedIn=true;\n          localStorage.setItem('isLoggedIn', true);\n          try {\n              const res = await axios({\n                method: 'GET',\n                url:'/protected',\n                headers:{\n                  'Authorization':\"Bearer \" + userStore.token\n                },\n              })\n              userStore.name=res.data.name;\n              localStorage.setItem('name', res.data.name);\n              localStorage.setItem('emaila',this.email);\n          } catch (error) {\n            console.log(error)\n          }\n          \n          await this.$router.push({path:\"/main\"});\n          location.reload();\n        }\n        console.log('Login successful:', response.data);\n      } catch (error) {\n        console.error('Login failed:', error);\n      }\n      },\n    },\n  };\n\n  </script>\n  \n  <style>\n  body {\n    margin: 0;\n    padding: 0;\n    \n  }\n  \n  .responsive-page {\n    display: flex;\n    flex-direction: column; /* Set the direction to column */\n    justify-content: center; /* Center vertically */\n    align-items: center; /* Center horizontally */\n    height: 84.5vh;\n    background-color: rgb(4, 26, 59);\n  }\n  \n  .login-form-container {\n    margin-top: 20px; /* Add some space between the title and form */\n    \n  }\n  \n  .login-form {\n    background-color: rgb(61, 131, 236);\n    border-radius: 8px;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n    padding: 40px;\n    max-width: 400px;\n    width: 100%;\n    justify-content:center;\n    align-items: center;\n    \n  }\n  \n  .form-group {\n    margin-bottom: 16px;\n  }\n  \n  label {\n    display: block;\n    margin-bottom: 8px;\n  }\n  .login-title {\n    color: white;\n    font-size: 34px; /* Adjust the font size as needed */\n    margin-bottom: 30px; /* Add space below the title */\n    margin-left: 0px;\n    text-align: center;\n   \n  }\n  \n  input {\n  \n      width: 100%;\n      padding: 5px;\n      border: 1px solid #ccc;\n      border-radius: 4px;\n      background-color: #fff; \n    \n  }\n  \n  .login-button {\n    background-color: #007bff;\n    color: #ffffff;\n    padding: 10px 20px;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n    transition: background-color 0.3s ease;\n  }\n  \n  .login-button:hover {\n    background-color: #0056b3;\n  }\n  </style>\n  "],"mappings":";;EACOA,KAAK,EAAC;AAAiB;;EAGrBA,KAAK,EAAC;AAAsB;gCAE/BC,mBAAA,CAAkC;EAA9BD,KAAK,EAAC;AAAa,GAAC,OAAK;;EACxBA,KAAK,EAAC;AAAY;gCACrBC,mBAAA,CAAiC;EAA1BC,GAAG,EAAC;AAAO,GAAC,QAAM;;EAGtBF,KAAK,EAAC;AAAY;gCACrBC,mBAAA,CAAuC;EAAhCC,GAAG,EAAC;AAAU,GAAC,WAAS;gCAGjCD,mBAAA,CAAyD;EAAjDE,IAAI,EAAC,QAAQ;EAACH,KAAK,EAAC;GAAe,OAAK;;uBAdpDI,mBAAA,CAiBM,OAjBNC,UAiBM,GAdJJ,mBAAA,CAaM,OAbNK,UAaM,GAZNL,mBAAA,CAWO;IAXAM,QAAM,EAAAC,MAAA,QAAAA,MAAA,MAAAC,cAAA,KAAAC,IAAA,KAAUC,QAAA,CAAAC,UAAA,IAAAD,QAAA,CAAAC,UAAA,IAAAF,IAAA,CAAU;IAAEV,KAAK,EAAC;MACvCa,UAAkC,EAClCZ,mBAAA,CAGM,OAHNa,UAGM,GAFJC,UAAiC,E,gBACjCd,mBAAA,CAA0D;IAAnDE,IAAI,EAAC,OAAO;IAACa,EAAE,EAAC,OAAO;+DAAUC,KAAA,CAAAC,KAAK,GAAAC,MAAA;IAAEC,QAAQ,EAAR;gCAAPH,KAAA,CAAAC,KAAK,E,KAE/CjB,mBAAA,CAGM,OAHNoB,UAGM,GAFJC,UAAuC,E,gBACvCrB,mBAAA,CAAmE;IAA5DE,IAAI,EAAC,UAAU;IAACa,EAAE,EAAC,UAAU;+DAAUC,KAAA,CAAAM,QAAQ,GAAAJ,MAAA;IAAEC,QAAQ,EAAR;gCAAVH,KAAA,CAAAM,QAAQ,E,KAExDC,UAAyD,C"},"metadata":{},"sourceType":"module","externalDependencies":[]}