{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport { nextTick } from 'vue';\nimport { ref } from \"vue\";\nimport { useUserStore } from '@/services/user-store';\n\n// Import your user store\nconst userStore = useUserStore();\nexport default {\n  data() {\n    return {\n      email: '',\n      password: ''\n    };\n  },\n  methods: {\n    async submitForm() {\n      try {\n        const response = await axios.post('/login', {\n          \"email\": this.email,\n          \"password\": this.password\n        });\n        userStore.token = response.data.ok;\n        userStore.expiresIn = response.data.expiresIn;\n        userStore.setTime();\n        if (response.status == 200) {\n          userStore.isLoggedIn = true;\n          localStorage.setItem('isLoggedIn', true);\n          try {\n            const res = await axios({\n              method: 'GET',\n              url: '/protected',\n              headers: {\n                'Authorization': \"Bearer \" + userStore.token\n              }\n            });\n            userStore.name = res.data.name;\n            localStorage.setItem('name', res.data.name);\n            localStorage.setItem('emaila', this.email);\n          } catch (error) {\n            console.log(error);\n          }\n          await this.$router.push({\n            path: \"/main\"\n          });\n          location.reload();\n        }\n        console.log('Login successful:', response.data);\n      } catch (error) {\n        console.error('Login failed:', error);\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","nextTick","ref","useUserStore","userStore","data","email","password","methods","submitForm","response","post","token","ok","expiresIn","setTime","status","isLoggedIn","localStorage","setItem","res","method","url","headers","name","error","console","log","$router","push","path","location","reload"],"sources":["/home/bikes/Desktop/MECGIT/MEC-Factory/frontend/src/views/Login.vue"],"sourcesContent":["<template>\n  <div class=\"responsive-page\">\n   \n    \n    <div class=\"login-form-container\">\n    <form @submit.prevent=\"submitForm\" class=\"login-form\">\n      <h1 class=\"login-title\">Login</h1>\n      <div class=\"form-group\">\n        <label for=\"email\">Email:</label>\n        <input type=\"email\" id=\"email\" v-model=\"email\" required />\n      </div>\n      <div class=\"form-group\">\n        <label for=\"password\">Password:</label>\n        <input type=\"password\" id=\"password\" v-model=\"password\" required />\n      </div>\n      <button type=\"submit\" class=\"login-button\">Login</button>\n    </form>\n    </div>\n  </div>\n  \n  </template>\n  \n  <script>\n\nimport axios from 'axios';\nimport { nextTick } from 'vue';\nimport {ref} from \"vue\";\nimport { useUserStore } from '@/services/user-store';\n\n // Import your user store\nconst userStore = useUserStore();\n\n  export default {\n    data() {\n      return {\n        email: '',\n        password: '',\n      };\n    },\n    methods: {\n        async submitForm() {\n        try {\n        const response = await axios.post('/login', {\n           \"email\": this.email,\n          \"password\": this.password,\n        });\n        userStore.token=response.data.ok;\n        userStore.expiresIn=response.data.expiresIn;\n        userStore.setTime();      \n        if(response.status==200) {\n          userStore.isLoggedIn=true;\n          localStorage.setItem('isLoggedIn', true);\n          try {\n              const res = await axios({\n                method: 'GET',\n                url:'/protected',\n                headers:{\n                  'Authorization':\"Bearer \" + userStore.token\n                },\n              })\n              userStore.name=res.data.name;\n              localStorage.setItem('name', res.data.name);\n              localStorage.setItem('emaila',this.email);\n          } catch (error) {\n            console.log(error)\n          }\n          \n          await this.$router.push({path:\"/main\"});\n          location.reload();\n        }\n        console.log('Login successful:', response.data);\n      } catch (error) {\n        console.error('Login failed:', error);\n      }\n      },\n    },\n  };\n\n  </script>\n  \n  <style>\n  body {\n    margin: 0;\n    padding: 0;\n    \n  }\n  \n  .responsive-page {\n    display: flex;\n    flex-direction: column; /* Set the direction to column */\n    justify-content: center; /* Center vertically */\n    align-items: center; /* Center horizontally */\n    height: 84.5vh;\n    background-color: rgb(4, 26, 59);\n  }\n  \n  .login-form-container {\n    margin-top: 20px; /* Add some space between the title and form */\n    \n  }\n  \n  .login-form {\n    background-color: rgb(61, 131, 236);\n    border-radius: 8px;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n    padding: 40px;\n    max-width: 400px;\n    width: 100%;\n    justify-content:center;\n    align-items: center;\n    \n  }\n  \n  .form-group {\n    margin-bottom: 16px;\n  }\n  \n  label {\n    display: block;\n    margin-bottom: 8px;\n  }\n  .login-title {\n    color: white;\n    font-size: 34px; /* Adjust the font size as needed */\n    margin-bottom: 30px; /* Add space below the title */\n    margin-left: 0px;\n    text-align: center;\n   \n  }\n  \n  input {\n  \n      width: 100%;\n      padding: 5px;\n      border: 1px solid #ccc;\n      border-radius: 4px;\n      background-color: #fff; \n    \n  }\n  \n  .login-button {\n    background-color: #007bff;\n    color: #ffffff;\n    padding: 10px 20px;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n    transition: background-color 0.3s ease;\n  }\n  \n  .login-button:hover {\n    background-color: #0056b3;\n  }\n  </style>\n  "],"mappings":";AAwBA,OAAOA,KAAI,MAAO,OAAO;AACzB,SAASC,QAAO,QAAS,KAAK;AAC9B,SAAQC,GAAG,QAAO,KAAK;AACvB,SAASC,YAAW,QAAS,uBAAuB;;AAEnD;AACD,MAAMC,SAAQ,GAAID,YAAY,EAAE;AAE9B,eAAe;EACbE,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,KAAK,EAAE,EAAE;MACTC,QAAQ,EAAE;IACZ,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACL,MAAMC,UAAUA,CAAA,EAAG;MACnB,IAAI;QACJ,MAAMC,QAAO,GAAI,MAAMV,KAAK,CAACW,IAAI,CAAC,QAAQ,EAAE;UACzC,OAAO,EAAE,IAAI,CAACL,KAAK;UACpB,UAAU,EAAE,IAAI,CAACC;QACnB,CAAC,CAAC;QACFH,SAAS,CAACQ,KAAK,GAACF,QAAQ,CAACL,IAAI,CAACQ,EAAE;QAChCT,SAAS,CAACU,SAAS,GAACJ,QAAQ,CAACL,IAAI,CAACS,SAAS;QAC3CV,SAAS,CAACW,OAAO,EAAE;QACnB,IAAGL,QAAQ,CAACM,MAAM,IAAE,GAAG,EAAE;UACvBZ,SAAS,CAACa,UAAU,GAAC,IAAI;UACzBC,YAAY,CAACC,OAAO,CAAC,YAAY,EAAE,IAAI,CAAC;UACxC,IAAI;YACA,MAAMC,GAAE,GAAI,MAAMpB,KAAK,CAAC;cACtBqB,MAAM,EAAE,KAAK;cACbC,GAAG,EAAC,YAAY;cAChBC,OAAO,EAAC;gBACN,eAAe,EAAC,SAAQ,GAAInB,SAAS,CAACQ;cACxC;YACF,CAAC;YACDR,SAAS,CAACoB,IAAI,GAACJ,GAAG,CAACf,IAAI,CAACmB,IAAI;YAC5BN,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEC,GAAG,CAACf,IAAI,CAACmB,IAAI,CAAC;YAC3CN,YAAY,CAACC,OAAO,CAAC,QAAQ,EAAC,IAAI,CAACb,KAAK,CAAC;UAC7C,EAAE,OAAOmB,KAAK,EAAE;YACdC,OAAO,CAACC,GAAG,CAACF,KAAK;UACnB;UAEA,MAAM,IAAI,CAACG,OAAO,CAACC,IAAI,CAAC;YAACC,IAAI,EAAC;UAAO,CAAC,CAAC;UACvCC,QAAQ,CAACC,MAAM,EAAE;QACnB;QACAN,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAEjB,QAAQ,CAACL,IAAI,CAAC;MACjD,EAAE,OAAOoB,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,eAAe,EAAEA,KAAK,CAAC;MACvC;IACA;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}